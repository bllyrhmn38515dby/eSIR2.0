@startuml eSIR2.0_Complete_UseCaseDiagram

!theme plain
skinparam actorStyle awesome
skinparam usecase {
    BackgroundColor LightBlue
    BorderColor DarkBlue
    ArrowColor DarkBlue
    FontSize 10
}
skinparam actor {
    FontSize 12
    FontStyle bold
}
skinparam rectangle {
    BorderColor DarkBlue
    BackgroundColor LightYellow
}

title Use Case Diagram - Sistem eSIR 2.0\nSistem Informasi Rujukan Pasien

' ========================================
' ACTORS DEFINITION
' ========================================

' Primary Actors
actor "ðŸ‘¨â€ðŸ’¼ Admin Pusat" as AP #LightGreen
actor "ðŸ¥ Admin Faskes" as AF #LightBlue
actor "ðŸš‘ Sopir Ambulans" as SA #Orange
actor "ðŸ‘¤ Pasien" as P #Pink

' Secondary Actors (External Systems)
actor "ðŸ’¾ Database System" as DB #Gray
actor "ðŸ“§ Email Service" as ES #LightCyan
actor "ðŸ“ GPS System" as GPS #Yellow
actor "ðŸ”” Push Notification Service" as PNS #LightPink

' ========================================
' SYSTEM BOUNDARY
' ========================================

rectangle "SISTEM eSIR 2.0" {
    
    ' ========================================
    ' AUTHENTICATION & SECURITY USE CASES
    ' ========================================
    package "ðŸ” Authentication & Security" {
        usecase "Login/Logout" as UC1
        usecase "Reset Password" as UC2
        usecase "Session Management" as UC3
        usecase "Role-based Access Control" as UC4
    }
    
    ' ========================================
    ' USER MANAGEMENT USE CASES
    ' ========================================
    package "ðŸ‘¥ User Management" {
        usecase "Create User" as UC5
        usecase "Read User Data" as UC6
        usecase "Update User" as UC7
        usecase "Delete User" as UC8
        usecase "Assign Roles" as UC9
    }
    
    ' ========================================
    ' FASKES MANAGEMENT USE CASES
    ' ========================================
    package "ðŸ¥ Faskes Management" {
        usecase "Create Faskes" as UC10
        usecase "Read Faskes Data" as UC11
        usecase "Update Faskes" as UC12
        usecase "Delete Faskes" as UC13
    }
    
    ' ========================================
    ' REFERRAL MANAGEMENT USE CASES
    ' ========================================
    package "ðŸ“‹ Referral Management" {
        usecase "Create Referral" as UC14
        usecase "Read Referral Data" as UC15
        usecase "Update Referral Status" as UC16
        usecase "Cancel Referral" as UC17
        usecase "Add Referral Notes" as UC18
    }
    
    ' ========================================
    ' BED MANAGEMENT USE CASES
    ' ========================================
    package "ðŸ›ï¸ Bed Management" {
        usecase "View Bed Availability" as UC19
        usecase "Update Bed Status" as UC20
        usecase "Reserve Bed" as UC21
        usecase "Assign Patient to Bed" as UC22
    }
    
    ' ========================================
    ' DOCUMENT MANAGEMENT USE CASES
    ' ========================================
    package "ðŸ“„ Document Management" {
        usecase "Upload Documents" as UC23
        usecase "Download Documents" as UC24
        usecase "Delete Documents" as UC25
        usecase "View Document History" as UC26
    }
    
    ' ========================================
    ' AMBULANCE TRACKING USE CASES
    ' ========================================
    package "ðŸš‘ Ambulance Tracking" {
        usecase "Real-time Location Tracking" as UC27
        usecase "Journey Status Monitoring" as UC28
        usecase "ETA Updates" as UC29
        usecase "Route Optimization" as UC30
        usecase "Start Tracking Session" as UC31
        usecase "Stop Tracking Session" as UC32
    }
    
    ' ========================================
    ' NOTIFICATION SYSTEM USE CASES
    ' ========================================
    package "ðŸ”” Notification System" {
        usecase "Send Notifications" as UC33
        usecase "Receive Notifications" as UC34
        usecase "Push Notifications" as UC35
        usecase "Emergency Alerts" as UC36
    }
    
    ' ========================================
    ' REPORTING & ANALYTICS USE CASES
    ' ========================================
    package "ðŸ“Š Reporting & Analytics" {
        usecase "Generate Reports" as UC37
        usecase "View Statistics" as UC38
        usecase "Export Data" as UC39
        usecase "Dashboard Analytics" as UC40
    }
    
    ' ========================================
    ' SEARCH & FILTER USE CASES
    ' ========================================
    package "ðŸ” Search & Filter" {
        usecase "Search Patients" as UC41
        usecase "Search Referrals" as UC42
        usecase "Filter by Status" as UC43
        usecase "Advanced Search" as UC44
    }
    
    ' ========================================
    ' MOBILE FEATURES USE CASES
    ' ========================================
    package "ðŸ“± Mobile Features" {
        usecase "GPS Tracking" as UC45
        usecase "Background Tracking" as UC46
        usecase "Voice Commands" as UC47
        usecase "Offline Mode" as UC48
        usecase "Battery Optimization" as UC49
        usecase "Device Information" as UC50
    }
    
    ' ========================================
    ' DATA STORAGE USE CASES
    ' ========================================
    package "ðŸ’¾ Data Storage" {
        usecase "Store User Data" as UC51
        usecase "Store Patient Data" as UC52
        usecase "Store Referral Data" as UC53
        usecase "Store Tracking Data" as UC54
        usecase "Store Document Data" as UC55
        usecase "Store Bed Management Data" as UC56
        usecase "Store Search Logs" as UC57
    }
    
    ' ========================================
    ' LOCATION SERVICES USE CASES
    ' ========================================
    package "ðŸ“ Location Services" {
        usecase "Provide Location Data" as UC58
        usecase "Calculate Distance & ETA" as UC59
        usecase "Geocoding Services" as UC60
    }
}

' ========================================
' ACTOR RELATIONSHIPS
' ========================================

' Admin Pusat Relationships
AP --> UC1 : Authentication
AP --> UC2 : Password Management
AP --> UC3 : Session Control
AP --> UC4 : Access Control
AP --> UC5 : User Management
AP --> UC6 : User Data Access
AP --> UC7 : User Updates
AP --> UC8 : User Deletion
AP --> UC9 : Role Assignment
AP --> UC10 : Faskes Creation
AP --> UC11 : Faskes Data Access
AP --> UC12 : Faskes Updates
AP --> UC13 : Faskes Deletion
AP --> UC37 : Report Generation
AP --> UC38 : Statistics Viewing
AP --> UC39 : Data Export
AP --> UC40 : Analytics Access

' Admin Faskes Relationships
AF --> UC1 : Authentication
AF --> UC2 : Password Management
AF --> UC3 : Session Control
AF --> UC4 : Access Control
AF --> UC14 : Referral Creation
AF --> UC15 : Referral Data Access
AF --> UC16 : Referral Status Updates
AF --> UC17 : Referral Cancellation
AF --> UC18 : Referral Notes
AF --> UC19 : Bed Availability
AF --> UC20 : Bed Status Updates
AF --> UC21 : Bed Reservation
AF --> UC22 : Patient Assignment
AF --> UC23 : Document Upload
AF --> UC24 : Document Download
AF --> UC25 : Document Deletion
AF --> UC26 : Document History
AF --> UC27 : Location Tracking
AF --> UC28 : Status Monitoring
AF --> UC29 : ETA Updates
AF --> UC30 : Route Optimization
AF --> UC33 : Notification Sending
AF --> UC34 : Notification Receiving
AF --> UC41 : Patient Search
AF --> UC42 : Referral Search
AF --> UC43 : Status Filtering
AF --> UC44 : Advanced Search

' Sopir Ambulans Relationships
SA --> UC1 : Authentication
SA --> UC2 : Password Management
SA --> UC3 : Session Control
SA --> UC4 : Access Control
SA --> UC31 : Start Tracking
SA --> UC32 : Stop Tracking
SA --> UC27 : Location Tracking
SA --> UC28 : Status Monitoring
SA --> UC29 : ETA Updates
SA --> UC30 : Route Optimization
SA --> UC15 : Referral Data Access
SA --> UC16 : Referral Status Updates
SA --> UC34 : Notification Receiving
SA --> UC35 : Push Notifications
SA --> UC45 : GPS Tracking
SA --> UC46 : Background Tracking
SA --> UC47 : Voice Commands
SA --> UC48 : Offline Mode
SA --> UC49 : Battery Optimization
SA --> UC50 : Device Information

' Pasien Relationships
P --> UC15 : Referral Status View
P --> UC34 : Notification Receiving
P --> UC35 : Push Notifications
P --> UC48 : Offline Mode
P --> UC50 : Device Information

' ========================================
' EXTERNAL SYSTEM RELATIONSHIPS
' ========================================

' Database System Relationships
DB --> UC51 : User Data Storage
DB --> UC52 : Patient Data Storage
DB --> UC53 : Referral Data Storage
DB --> UC54 : Tracking Data Storage
DB --> UC55 : Document Data Storage
DB --> UC56 : Bed Management Storage
DB --> UC57 : Search Logs Storage

' Email Service Relationships
ES --> UC33 : Notification Delivery
ES --> UC2 : Password Reset
ES --> UC36 : Emergency Alerts

' GPS System Relationships
GPS --> UC58 : Location Data Provision
GPS --> UC59 : Distance & ETA Calculation
GPS --> UC60 : Geocoding Services

' Push Notification Service Relationships
PNS --> UC35 : Push Notifications
PNS --> UC36 : Emergency Alerts

' ========================================
' INCLUDE RELATIONSHIPS (Wajib)
' ========================================

UC1 ..> UC3 : <<include>>
UC14 ..> UC23 : <<include>>
UC31 ..> UC58 : <<include>>
UC33 ..> UC51 : <<include>>
UC27 ..> UC58 : <<include>>
UC29 ..> UC59 : <<include>>

' ========================================
' EXTEND RELATIONSHIPS (Opsional)
' ========================================

UC36 ..> UC35 : <<extend>>
UC47 ..> UC45 : <<extend>>
UC48 ..> UC45 : <<extend>>
UC49 ..> UC45 : <<extend>>
UC46 ..> UC45 : <<extend>>

' ========================================
' GENERALIZATION RELATIONSHIPS
' ========================================

AP -|> AF : <<generalization>>

' ========================================
' NOTES
' ========================================

note right of AP
  **Admin Pusat**
  - Akses penuh ke sistem
  - Manajemen user & faskes
  - Reporting & analytics
end note

note right of AF
  **Admin Faskes**
  - Manajemen rujukan
  - Bed management
  - Document handling
end note

note right of SA
  **Sopir Ambulans**
  - GPS tracking
  - Mobile features
  - Real-time updates
end note

note right of P
  **Pasien**
  - Status monitoring
  - Notifications
  - Mobile access
end note

note bottom of DB
  **Database System**
  - MySQL database
  - Data persistence
  - Search logs
end note

note bottom of GPS
  **GPS System**
  - Location services
  - Route calculation
  - Real-time tracking
end note

@enduml
