@startuml Deployment Diagram Visual - eSIR 2.0

!theme plain
skinparam backgroundColor #F8F9FA
skinparam defaultFontName Arial
skinparam defaultFontSize 12
skinparam roundcorner 25
skinparam shadowing false

' Color definitions
!define CLIENT_COLOR #E3F2FD
!define FRONTEND_COLOR #E8F5E8
!define BACKEND_COLOR #FFF3E0
!define DATABASE_COLOR #F3E5F5
!define STORAGE_COLOR #E0F2F1
!define NETWORK_COLOR #FCE4EC
!define EMAIL_COLOR #FFF8E1

title <size:20><b>🚑 eSIR 2.0 - Emergency Referral System</b></size>\n<size:14>Deployment Architecture Overview</size>

' ===== CLIENT LAYER =====
rectangle "🖥️ **Client Layer**" as client #CLIENT_COLOR {
  rectangle "🌐 Web Browser" as browser
  rectangle "📱 Mobile App" as mobile
  rectangle "⚙️ Admin Dashboard" as admin
}

' ===== NETWORK LAYER =====
rectangle "🌐 **Network Infrastructure**" as network #NETWORK_COLOR {
  rectangle "🔒 Load Balancer" as lb
  rectangle "🛡️ Firewall" as firewall
  rectangle "🔐 VPN Gateway" as vpn
}

' ===== WEB SERVER LAYER =====
rectangle "🌍 **Web Server**" as webserver #FRONTEND_COLOR {
  rectangle "📄 Static Files" as static
  rectangle "🔐 SSL Certificate" as ssl
  rectangle "🔄 Reverse Proxy" as proxy
}

' ===== FRONTEND LAYER =====
rectangle "⚛️ **Frontend Server**" as frontend #FRONTEND_COLOR {
  rectangle "⚛️ React App" as react
  rectangle "📦 Build Files" as build
  rectangle "🎨 Public Assets" as assets
  rectangle "🗺️ Leaflet Maps" as maps
}

' ===== BACKEND LAYER =====
rectangle "🖥️ **Backend Server**" as backend #BACKEND_COLOR {
  rectangle "🟢 Node.js Runtime" as nodejs
  rectangle "🚀 Express.js Server" as express
  rectangle "🔌 Socket.io" as socketio
  rectangle "🔑 JWT Auth" as jwt
  rectangle "🌐 CORS Middleware" as cors
  rectangle "📁 File Upload" as multer
  rectangle "📧 Email Service" as email
}

' ===== DATABASE LAYER =====
rectangle "🗄️ **Database Server**" as database #DATABASE_COLOR {
  rectangle "🐬 MySQL Database" as mysql
  rectangle "📋 Database Schema" as schema
  rectangle "👥 User Data" as userdata
  rectangle "🏥 Referral Data" as referraldata
  rectangle "🏢 Hospital Data" as hospitaldata
}

' ===== STORAGE LAYER =====
rectangle "💾 **File Storage**" as storage #STORAGE_COLOR {
  rectangle "📁 Upload Directory" as uploads
  rectangle "📄 Document Files" as docs
  rectangle "🖼️ Image Files" as images
}

' ===== EMAIL LAYER =====
rectangle "📧 **Email Server**" as emailserver #EMAIL_COLOR {
  rectangle "📤 SMTP Server" as smtp
  rectangle "📝 Email Templates" as templates
}

' ===== CONNECTIONS =====
' Client connections
client --> network : "HTTPS (443)"
client --> frontend : "HTTP (3000)"

' Network to servers
network --> webserver : "Load Balance"
network --> frontend : "Load Balance"
network --> backend : "Load Balance"

' Server connections
webserver --> frontend : "Proxy"
frontend --> backend : "API Calls (3001)"
backend --> database : "MySQL (3306)"
backend --> storage : "File System"
backend --> emailserver : "SMTP (587)"

' ===== TECHNOLOGY STACK NOTES =====
note right of frontend #lightblue
  <b>Frontend Stack:</b>
  • React 19.1.1
  • React Router DOM
  • Leaflet Maps
  • Socket.io Client
  • Axios HTTP Client
end note

note right of backend #lightyellow
  <b>Backend Stack:</b>
  • Node.js Runtime
  • Express.js 4.18.2
  • Socket.io 4.7.4
  • MySQL2 3.6.5
  • JWT Authentication
  • Multer File Upload
  • Nodemailer
end note

note right of database #lightgreen
  <b>Database:</b>
  • MySQL Database
  • Port: 3306
  • Database: esirv2
  • Tables: users, referrals,
    hospitals, documents
end note

' ===== ENVIRONMENT INFO =====
note bottom of client #lightcyan
  <b>Development Environment:</b>
  • Frontend: http://localhost:3000
  • Backend: http://localhost:3001
  • Database: localhost:3306
end note

note bottom of backend #lightpink
  <b>Production Considerations:</b>
  • Environment Variables
  • Process Management (PM2)
  • Logging & Monitoring
  • Backup Strategies
  • SSL/TLS Encryption
end note

' ===== LEGEND =====
legend right
  <b>Connection Types:</b>
  • HTTPS (Port 443) - Secure Web
  • HTTP (Port 3000) - Frontend
  • HTTP (Port 3001) - Backend API
  • MySQL (Port 3306) - Database
  • SMTP (Port 587) - Email
end legend

@enduml
