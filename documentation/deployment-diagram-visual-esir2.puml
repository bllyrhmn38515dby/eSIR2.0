@startuml Deployment Diagram Visual - eSIR 2.0

!theme plain
skinparam backgroundColor #F8F9FA
skinparam defaultFontName Arial
skinparam defaultFontSize 12
skinparam roundcorner 25
skinparam shadowing false

' Color definitions
!define CLIENT_COLOR #E3F2FD
!define FRONTEND_COLOR #E8F5E8
!define BACKEND_COLOR #FFF3E0
!define DATABASE_COLOR #F3E5F5
!define STORAGE_COLOR #E0F2F1
!define NETWORK_COLOR #FCE4EC
!define EMAIL_COLOR #FFF8E1

title <size:20><b>ðŸš‘ eSIR 2.0 - Emergency Referral System</b></size>\n<size:14>Deployment Architecture Overview</size>

' ===== CLIENT LAYER =====
rectangle "ðŸ–¥ï¸ **Client Layer**" as client #CLIENT_COLOR {
  rectangle "ðŸŒ Web Browser" as browser
  rectangle "ðŸ“± Mobile App" as mobile
  rectangle "âš™ï¸ Admin Dashboard" as admin
}

' ===== NETWORK LAYER =====
rectangle "ðŸŒ **Network Infrastructure**" as network #NETWORK_COLOR {
  rectangle "ðŸ”’ Load Balancer" as lb
  rectangle "ðŸ›¡ï¸ Firewall" as firewall
  rectangle "ðŸ” VPN Gateway" as vpn
}

' ===== WEB SERVER LAYER =====
rectangle "ðŸŒ **Web Server**" as webserver #FRONTEND_COLOR {
  rectangle "ðŸ“„ Static Files" as static
  rectangle "ðŸ” SSL Certificate" as ssl
  rectangle "ðŸ”„ Reverse Proxy" as proxy
}

' ===== FRONTEND LAYER =====
rectangle "âš›ï¸ **Frontend Server**" as frontend #FRONTEND_COLOR {
  rectangle "âš›ï¸ React App" as react
  rectangle "ðŸ“¦ Build Files" as build
  rectangle "ðŸŽ¨ Public Assets" as assets
  rectangle "ðŸ—ºï¸ Leaflet Maps" as maps
}

' ===== BACKEND LAYER =====
rectangle "ðŸ–¥ï¸ **Backend Server**" as backend #BACKEND_COLOR {
  rectangle "ðŸŸ¢ Node.js Runtime" as nodejs
  rectangle "ðŸš€ Express.js Server" as express
  rectangle "ðŸ”Œ Socket.io" as socketio
  rectangle "ðŸ”‘ JWT Auth" as jwt
  rectangle "ðŸŒ CORS Middleware" as cors
  rectangle "ðŸ“ File Upload" as multer
  rectangle "ðŸ“§ Email Service" as email
}

' ===== DATABASE LAYER =====
rectangle "ðŸ—„ï¸ **Database Server**" as database #DATABASE_COLOR {
  rectangle "ðŸ¬ MySQL Database" as mysql
  rectangle "ðŸ“‹ Database Schema" as schema
  rectangle "ðŸ‘¥ User Data" as userdata
  rectangle "ðŸ¥ Referral Data" as referraldata
  rectangle "ðŸ¢ Hospital Data" as hospitaldata
}

' ===== STORAGE LAYER =====
rectangle "ðŸ’¾ **File Storage**" as storage #STORAGE_COLOR {
  rectangle "ðŸ“ Upload Directory" as uploads
  rectangle "ðŸ“„ Document Files" as docs
  rectangle "ðŸ–¼ï¸ Image Files" as images
}

' ===== EMAIL LAYER =====
rectangle "ðŸ“§ **Email Server**" as emailserver #EMAIL_COLOR {
  rectangle "ðŸ“¤ SMTP Server" as smtp
  rectangle "ðŸ“ Email Templates" as templates
}

' ===== CONNECTIONS =====
' Client connections
client --> network : "HTTPS (443)"
client --> frontend : "HTTP (3000)"

' Network to servers
network --> webserver : "Load Balance"
network --> frontend : "Load Balance"
network --> backend : "Load Balance"

' Server connections
webserver --> frontend : "Proxy"
frontend --> backend : "API Calls (3001)"
backend --> database : "MySQL (3306)"
backend --> storage : "File System"
backend --> emailserver : "SMTP (587)"

' ===== TECHNOLOGY STACK NOTES =====
note right of frontend #lightblue
  <b>Frontend Stack:</b>
  â€¢ React 19.1.1
  â€¢ React Router DOM
  â€¢ Leaflet Maps
  â€¢ Socket.io Client
  â€¢ Axios HTTP Client
end note

note right of backend #lightyellow
  <b>Backend Stack:</b>
  â€¢ Node.js Runtime
  â€¢ Express.js 4.18.2
  â€¢ Socket.io 4.7.4
  â€¢ MySQL2 3.6.5
  â€¢ JWT Authentication
  â€¢ Multer File Upload
  â€¢ Nodemailer
end note

note right of database #lightgreen
  <b>Database:</b>
  â€¢ MySQL Database
  â€¢ Port: 3306
  â€¢ Database: esirv2
  â€¢ Tables: users, referrals,
    hospitals, documents
end note

' ===== ENVIRONMENT INFO =====
note bottom of client #lightcyan
  <b>Development Environment:</b>
  â€¢ Frontend: http://localhost:3000
  â€¢ Backend: http://localhost:3001
  â€¢ Database: localhost:3306
end note

note bottom of backend #lightpink
  <b>Production Considerations:</b>
  â€¢ Environment Variables
  â€¢ Process Management (PM2)
  â€¢ Logging & Monitoring
  â€¢ Backup Strategies
  â€¢ SSL/TLS Encryption
end note

' ===== LEGEND =====
legend right
  <b>Connection Types:</b>
  â€¢ HTTPS (Port 443) - Secure Web
  â€¢ HTTP (Port 3000) - Frontend
  â€¢ HTTP (Port 3001) - Backend API
  â€¢ MySQL (Port 3306) - Database
  â€¢ SMTP (Port 587) - Email
end legend

@enduml
